---
import Layout from './Layout.astro';
import { Image } from 'astro:assets';
import AnimatedBackground from '../components/ui/AnimatedBackground.astro';

interface Props {
  title: string;
  date: string;
  category: string;
  image: ImageMetadata;
  intro?: string;
}

const { title, date, category, image, intro } = Astro.props;
---

<Layout title={`${title} - Merly Patrimoine`}>
  <div class="relative">
    <AnimatedBackground />
    <article class="section section-bg-gray pt-16 md:pt-37.5 pb-(--spacing-section)">
      <div>
        <div class="flex items-center gap-4 mb-8">
          <a href="/blog" class="text-sm text-(--color-text-muted) hover:text-(--color-primary) transition-colors">&larr; Retour aux ressources</a>
        </div>

        <div class="flex items-center gap-4 mb-8">
          <span class="text-sm text-(--color-text-muted)">{date}</span>
          <span class="text-sm px-3 py-1 bg-(--color-bg-section) rounded-full">{category}</span>
        </div>

        <h1 class="text-body-lg font-light leading-[1.2] mb-8">{title}</h1>

        <div class="bg-(--color-bg-section) rounded-[5px] p-8 md:p-20 lg:p-32">
          <Image
            src={image}
            alt={title}
            class="img-cover h-[357px] md:h-[575px] lg:h-[805px] mb-8 md:mb-20 lg:mb-32"
            widths={[400, 800, 1200, 1512]}
            sizes="(max-width: 640px) 100vw, (max-width: 1024px) 100vw, 1512px"
            loading="eager"
          />
          {intro && <p class="heading-md leading-relaxed mb-12 lg:px-32">{intro}</p>}
          <div class="prose prose-lg lg:px-32">
            <slot />
          </div>
        </div>
      </div>
    </article>
  </div>
</Layout>
